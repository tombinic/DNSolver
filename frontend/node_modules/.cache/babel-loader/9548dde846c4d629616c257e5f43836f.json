{"ast":null,"code":"var _jsxFileName = \"D:\\\\unipr\\\\Telematica\\\\Progetto\\\\Telematica\\\\frontend\\\\src\\\\components\\\\FancyModal.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Modal from '@mui/material/Modal';\nimport axios from \"axios\";\nimport * as Constants from '../Constants';\nimport AuthContext from \"../contexts/AuthContext.jsx\";\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@mui/material/TextField';\nimport { createTheme, ThemeProvider, styled } from '@mui/material/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 400,\n  bgcolor: 'background.paper',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4\n};\nconst WhiteBorderTextField = styled(TextField)`\n  & label.Mui-focused {\n    color: #13aa52;\n  }\n  & .MuiOutlinedInput-root {\n    &.Mui-focused fieldset {\n      border-color: #13aa52;\n    }\n  }\n`;\n_c = WhiteBorderTextField;\n\nconst FancyModal = _ref => {\n  _s();\n\n  let {\n    handleClose,\n    open,\n    setOpen,\n    setPreferences,\n    preferences\n  } = _ref;\n  const {\n    auth\n  } = useContext(AuthContext);\n  const [dns1, setDns1] = useState('');\n  const [dns2, setDns2] = useState('');\n  const [isFormInvalidDns1, setIsFormInvalidDns1] = useState(false);\n  const [isFormInvalidDns2, setIsFormInvalidDns2] = useState(false);\n\n  function checkIp(ipaddress) {\n    return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress);\n  }\n\n  function handleApplyClick() {\n    if (!checkIp(dns1)) setIsFormInvalidDns1(true);\n    if (!checkIp(dns2)) setIsFormInvalidDns2(true);\n    if (!checkIp(dns1) || !checkIp(dns2)) return;\n    axios.post(Constants.BACKEND_URL + auth.username + Constants.GET_PREFERENCES, {\n      username: auth.username,\n      dns1: dns1,\n      dns2: dns2\n    }).then(function (response) {\n      axios.get(Constants.BACKEND_URL + auth.username + Constants.GET_PREFERENCES).then(function (res) {\n        setPreferences(res.data.preferences);\n        setOpen(false);\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          id: \"modal-modal-title\",\n          variant: \"h5\",\n          children: [\"Primay DNS: \", preferences.primary_dns]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"modal-modal-title\",\n          variant: \"h5\",\n          children: [\"Secondary DNS: \", preferences.secondary_dns]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          style: {\n            marginBottom: '10px',\n            marginTop: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(WhiteBorderTextField, {\n          margin: \"normal\",\n          fullWidth: true,\n          value: dns1,\n          error: isFormInvalidDns1,\n          onChange: e => {\n            setDns1(e.target.value);\n            setIsFormInvalidDns1(false);\n          },\n          helperText: isFormInvalidDns1 && \"Invalid IP for Primary DNS!\",\n          id: \"dns1\",\n          label: \"Primary DNS\",\n          name: \"dns1\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(WhiteBorderTextField, {\n          margin: \"normal\",\n          fullWidth: true,\n          value: dns2,\n          error: isFormInvalidDns2,\n          helperText: isFormInvalidDns2 && \"Invalid IP for Secondary DNS!\",\n          onChange: e => {\n            setDns2(e.target.value);\n            setIsFormInvalidDns2(false);\n          },\n          id: \"dns2\",\n          label: \"Secondary DNS\",\n          name: \"dns2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          sx: {\n            mt: 3,\n            mb: 2\n          },\n          style: {\n            backgroundColor: '#13aa52',\n            color: 'white'\n          },\n          onClick: e => handleApplyClick(),\n          children: \"Apply changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            fontStyle: 'italic',\n            fontSize: 12\n          },\n          style: {\n            color: '#222'\n          },\n          children: \"WARNING: Some DNS are not supported by the library, if you not receive responses set as Primary DNS 8.8.8.8, and as Secondary DNS 8.8.4.4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FancyModal, \"h/4pkKvvQC1YfTyd7MuiwU3MMpE=\");\n\n_c2 = FancyModal;\nexport default FancyModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"WhiteBorderTextField\");\n$RefreshReg$(_c2, \"FancyModal\");","map":{"version":3,"sources":["D:/unipr/Telematica/Progetto/Telematica/frontend/src/components/FancyModal.jsx"],"names":["React","useState","useContext","useEffect","Box","Button","Typography","Modal","axios","Constants","AuthContext","Divider","TextField","createTheme","ThemeProvider","styled","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","WhiteBorderTextField","FancyModal","handleClose","open","setOpen","setPreferences","preferences","auth","dns1","setDns1","dns2","setDns2","isFormInvalidDns1","setIsFormInvalidDns1","isFormInvalidDns2","setIsFormInvalidDns2","checkIp","ipaddress","test","handleApplyClick","post","BACKEND_URL","username","GET_PREFERENCES","then","response","get","res","data","primary_dns","secondary_dns","marginBottom","marginTop","e","target","value","mt","mb","backgroundColor","color","fontStyle","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport Modal from '@mui/material/Modal';\r\nimport axios from \"axios\";\r\nimport * as Constants from '../Constants';\r\nimport AuthContext from \"../contexts/AuthContext.jsx\";\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TextField from '@mui/material/TextField';\r\nimport { createTheme, ThemeProvider, styled } from '@mui/material/styles';\r\n\r\nconst style = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 400,\r\n  bgcolor: 'background.paper',\r\n  border: '2px solid #000',\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nconst WhiteBorderTextField = styled(TextField)`\r\n  & label.Mui-focused {\r\n    color: #13aa52;\r\n  }\r\n  & .MuiOutlinedInput-root {\r\n    &.Mui-focused fieldset {\r\n      border-color: #13aa52;\r\n    }\r\n  }\r\n`;\r\n\r\nconst FancyModal = ({handleClose, open, setOpen, setPreferences, preferences}) => {\r\n  const { auth } = useContext(AuthContext);\r\n  const [dns1, setDns1] = useState('');\r\n  const [dns2, setDns2] = useState('');\r\n  const [isFormInvalidDns1, setIsFormInvalidDns1] = useState(false);\r\n  const [isFormInvalidDns2, setIsFormInvalidDns2] = useState(false);\r\n\r\n  function checkIp(ipaddress) {\r\n      return (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress))\r\n  }\r\n\r\n  function handleApplyClick(){\r\n      if(!checkIp(dns1)) setIsFormInvalidDns1(true);\r\n      if(!checkIp(dns2)) setIsFormInvalidDns2(true);\r\n      if(!checkIp(dns1) || !checkIp(dns2)) return;\r\n\r\n      axios.post(Constants.BACKEND_URL + auth.username + Constants.GET_PREFERENCES, {\r\n          username: auth.username,\r\n          dns1: dns1,\r\n          dns2: dns2,\r\n      }).then(function (response) {\r\n          axios.get(Constants.BACKEND_URL + auth.username + Constants.GET_PREFERENCES).then(function (res) {\r\n            setPreferences(res.data.preferences);\r\n            setOpen(false);\r\n          });\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={style}>\r\n          <Typography id=\"modal-modal-title\" variant=\"h5\" >\r\n            Primay DNS: {preferences.primary_dns}\r\n          </Typography>\r\n          <Typography id=\"modal-modal-title\" variant=\"h5\" >\r\n            Secondary DNS: {preferences.secondary_dns}\r\n          </Typography>\r\n          <Divider style={{marginBottom:'10px', marginTop: '10px'}}/>\r\n          <WhiteBorderTextField\r\n            margin=\"normal\"\r\n            fullWidth\r\n            value = {dns1}\r\n            error = { isFormInvalidDns1 }\r\n            onChange={(e) => {setDns1(e.target.value); setIsFormInvalidDns1(false);}}\r\n            helperText={isFormInvalidDns1 && \"Invalid IP for Primary DNS!\"}\r\n            id=\"dns1\"\r\n            label=\"Primary DNS\"\r\n            name=\"dns1\"\r\n            autoFocus\r\n          />\r\n          <WhiteBorderTextField\r\n            margin=\"normal\"\r\n            fullWidth\r\n            value = {dns2}\r\n            error = { isFormInvalidDns2 }\r\n            helperText={isFormInvalidDns2 && \"Invalid IP for Secondary DNS!\"}\r\n            onChange={(e) => {setDns2(e.target.value); setIsFormInvalidDns2(false);}}\r\n            id=\"dns2\"\r\n            label=\"Secondary DNS\"\r\n            name=\"dns2\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            sx={{ mt: 3, mb: 2 }}\r\n            style={{backgroundColor: '#13aa52', color: 'white'}}\r\n            onClick={(e) => handleApplyClick()}\r\n          >\r\n            Apply changes\r\n          </Button>\r\n          <Typography sx={{ fontStyle: 'italic', fontSize: 12 }} style={{ color: '#222' }}>\r\n              WARNING: Some DNS are not supported by the library, if you not receive responses\r\n              set as Primary DNS 8.8.8.8, and as Secondary DNS 8.8.4.4.\r\n          </Typography>\r\n        </Box>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\nexport default FancyModal;\r\n"]},"metadata":{},"sourceType":"module"}